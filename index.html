<html>
  <head>
    <link rel="stylesheet" href="css/bootstrap.css">
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="js/three.min.js"></script>
    <script src="js/graph.js"></script>
    <script type="text/javascript">
      var structs = {
        fulereno: '0 33\n33 1\n1 34\n34 2\n2 35\n35 3\n4 36\n36 5\n5 37\n37 6\n6 38\n38 7\n7 39\n39 8\n9 32\n32 0\n33 43\n34 44\n35 46\n36 47\n37 49\n38 50\n39 40\n32 41\n43 44\n44 45\n45 46\n46 47\n47 48\n48 49\n49 50\n50 51\n51 40\n40 41\n41 42\n42 43\n42 52\n45 53\n48 53\n51 52\n52 53\n0 11\n11 1\n1 12\n12 2\n2 13\n13 3\n4 14\n14 5\n5 15\n15 6\n6 16\n16 7\n7 17\n17 8\n9 10\n10 0\n11 21\n12 22\n13 24\n14 25\n15 27\n16 28\n17 18\n10 19\n21 22\n22 23\n23 24\n24 25\n25 26\n26 27\n27 28\n28 29\n29 18\n18 19\n19 20\n20 21\n20 30\n23 31\n26 31\n29 30\n30 31\n3 4\n8 9',
        c2h6: '0 1\n0 2\n0 3\n0 4\n5 4\n6 4\n7 4',
        cube: '0 1\n1 2\n2 3\n3 0\n4 5\n5 6\n6 7\n7 4\n0 4\n1 5\n2 6\n3 7'
      };

      function get_bonds(s){
        var lines = s.split("\n");
        var bonds = [];
        for(var i in lines){
          var line = lines[i]
          var nodes = line.split(" ");
          bonds.push([parseInt(nodes[0]), parseInt(nodes[1])]);
        }
        return bonds;
      }

      function select_struct(e){
        document.getElementById('ta').value = structs[e.selectedOptions[0].value];
      }

      var bonds;

      function go(){
        bonds = get_bonds(document.getElementById('ta').value );
        _3dgraph();
      }
    </script>

  </head>
  <body>
    <div class="container-fluid" style="margin: 30px;">
      <div class="row-fluid">
        <div class="span3">
          <div class="alert alert-info">
            <h3>3D Graph renderer</h3>
            <p>Nodes repel each other (1/distance^2) and connections behave like springs (K * delta_length)</p>
            <p>Select a structure, modify if you want, and click Go.</p>
            <p><a href="https://github.com/tonylampada/webgl_graphs/tree/gh-pages">Fork me on Github</a> (maybe add some structures?)</p>
          </div>

          <div>
            Select structure 
            <select id="e" onchange="select_struct(this)">
              <option value="fulereno">Fulereno (sqn)</option>
              <option value="c2h6">c2h6</option>
              <option value="cube">cube</option>
            </select>
          </div>

          <div>
            Bonds
            <textarea id="ta" style="height: 150px"></textarea>
          </div>

          <div>
            <button onclick="go()">Go</button>
          </div>
        </div><!--/span-->
        <div class="span9" id="renderHere" style="border: solid 1px; height: 80%">
        </div><!--/span-->
      </div><!--/row-->
    </div>
  </body>
  <script type="text/javascript">
    var e = document.getElementById('e');
    document.getElementById('ta').value = structs[e.selectedOptions[0].value];
    go();
  </script>
</html>